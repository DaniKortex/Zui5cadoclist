<mvc:View controllerName="zui5cadoclist.controller.DocumentList"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m"
    xmlns:table="sap.ui.table"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar">
    <Page id="idDocumentListPage" title="{i18n>title}" showNavButton="false">
        <content>
            <Panel id="idDocumentsPanel" headerText="{i18n>documentsListTitle}" class="sapUiResponsiveMargin">
                <content>
                    <Toolbar id="idHeaderToolbar">
                        <Title id="idDocumentsTitle" text="{i18n>documentsCount}" level="H2"/>
                        <ToolbarSpacer id="idSpacerToolbar1"/>
                        <Button id="idRefreshButton" icon="sap-icon://refresh" 
                               tooltip="{i18n>refresh}" 
                               press=".onRefresh"/>
                    </Toolbar>

                    <!-- Smart Filter Bar (basic) -->
                    <smartFilterBar:SmartFilterBar id="idSmartFilterBar"
                                                  entitySet="PdfListSet"
                                                  useToolbar="true">
                        <smartFilterBar:controlConfiguration>
                            <smartFilterBar:ControlConfiguration id="idDocIdControlConfiguration" key="DocId" visible="true" visibleInAdvancedArea="false"/>
                            <smartFilterBar:ControlConfiguration id="idUsernameControlConfiguration" key="Username" visible="true" visibleInAdvancedArea="false"/>
                            <smartFilterBar:ControlConfiguration id="idTypeDocControlConfiguration" key="TypeDoc" visible="true" visibleInAdvancedArea="false"/>
                        </smartFilterBar:controlConfiguration>
                    </smartFilterBar:SmartFilterBar>
                    
                    <!-- Documents sap.ui.table.Table -->
                    <table:Table id="idDocumentsTable"
                                 rows="{ path: '/PdfListSet', parameters: { operationMode: 'Server' } }"
                                 busyIndicatorDelay="{viewModel>/delay}"
                                 busy="{viewModel>/busy}"
                                 selectionMode="Single"
                                  selectionBehavior="Row"
                                 rowSelectionChange=".onRowSelectionChange">
                        <table:columns>
                            <table:Column id="idDocIdColumn" width="12rem" sortProperty="DocId">
                                <Label id="idDocIdColLabel" text="{i18n>docId}"/>
                                <table:label>
                                    <HBox id="idDocIdHeaderHBox">
                                        <Text id="idDocIdHeaderText" text="{i18n>docId}"/>
                                    </HBox>
                                </table:label>
                                <table:template>
                                    <ObjectIdentifier id="idDocIdObjectIdentifier" title="{DocId}"/>
                                </table:template>
                            </table:Column>
                            <table:Column id="idFileNameColumn" width="16rem">
                                <Label id="idFileNameColLabel" text="{i18n>fileName}"/>
                                <table:template>
                                    <Text id="idFileNameText" text="{FileName}" maxLines="2"/>
                                </table:template>
                            </table:Column>
                            <table:Column id="idObjectDescColumn" width="18rem">
                                <Label id="idObjectDescLabel" text="{i18n>objectDescription}"/>
                                <table:template>
                                    <Text id="idObjectDescText" text="{ObjectDescription}" maxLines="2"/>
                                </table:template>
                            </table:Column>
                            <table:Column id="idUsernameColumn" width="10rem">
                                <Label id="idUsernameLabel" text="{i18n>username}"/>
                                <table:template>
                                    <Text id="idUsernameText" text="{Username}"/>
                                </table:template>
                            </table:Column>
                            <table:Column id="idModifiedAtColumn" width="14rem" sortProperty="ModifiedAt">
                                <table:label>
                                    <HBox id="idModifiedAtHeaderHBox">
                                        <Text id="idModifiedAtHeaderText" text="{i18n>modifiedAt}"/>
                                    </HBox>
                                </table:label>
                                <table:template>
                                    <Text id="idModifiedAtText" text="{ path: 'ModifiedAt', type: 'sap.ui.model.odata.type.DateTime', formatOptions: { pattern: 'dd.MM.yyyy HH:mm' } }"/>
                                </table:template>
                            </table:Column>
                            <table:Column id="idErrorColumn" width="10rem">
                                <Label id="idErrorLabel" text="{i18n>error}"/>
                                <table:template>
                                    <ObjectStatus id="idErrorObjectStatus" text="{path: 'Error', formatter: '.formatErrorText'}" state="{path: 'Error', formatter: '.formatErrorState'}"/>
                                </table:template>
                            </table:Column>
                            <table:Column id="idActionsColumn" width="8rem">
                                <Label id="idActionsLabel" text="{i18n>actions}"/>
                                <table:template>
                                    <Button id="idDownloadButton" icon="sap-icon://download" type="Transparent" tooltip="{i18n>download}" press=".onDownloadDocument"/>
                                </table:template>
                            </table:Column>
                        </table:columns>
                    </table:Table>
                </content>
            </Panel>
        </content>
        <footer>
            <Toolbar id="idFooterToolbar">
                <ToolbarSpacer id="idFooterSpacer"/>
                <Button id="idVisualizeButton"
                       text="{i18n>visualize}" 
                       icon="sap-icon://pdf-reader"
                       press=".onVisualizeDocument"
                       enabled="{viewModel>/hasSelection}"
                       type="Emphasized"/>
            </Toolbar>
        </footer>
    </Page>
</mvc:View>
