<mvc:View
    controllerName="zui5cadoclist.controller.DocumentList"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:table="sap.ui.table"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:f="sap.f"
    xmlns:sap.ui.fl="sap.ui.fl"
>
    <f:DynamicPage
        id="idDocumentListDynamicPage"
        fitContent="false"
    >
        <f:header>
            <f:DynamicPageHeader pinnable="false">
                <smartFilterBar:SmartFilterBar
                    id="idSmartFilterBar"
                    entitySet="PdfListSet"
                    persistencyKey="SmartFilterBar-PdfListSet"
                    useToolbar="true"
                    showClearOnFB="true"
                    showRestoreOnFB="true"
                    enableBasicSearch="false"
                    useDateRangeType="true"
                    initialized="onSFBInitialized"
                    afterVariantLoad="onSFAfterVariantLoad"
                    assignedFiltersChanged="onSFBAssignedFiltersChanged"
                    search="onSmartFilterSearch"
                />
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <table:Table
                id="idDocumentsTable"
                rows="{/PdfListSet}"
                selectionMode="None"
                enableColumnReordering="true"
                enableCellFilter="true"
                enableCustomFilter="true"
                enableBusyIndicator="true"
                width="100%"
                alternateRowColors="true"
                visibleRowCountMode="Auto"
            >
                <table:extension>
                    <OverflowToolbar id="idDocumentsTableToolbar">
                        <ToolbarSpacer id="idDocumentsTableToolbarSpacer" />
                        <Button
                            id="idExportButton"
                            icon="sap-icon://excel-attachment"
                            press="onExport"
                        />
                        <Button
                            id="idRefreshButton"
                            icon="sap-icon://refresh"
                            tooltip="{i18n>refresh}"
                            press=".onRefresh"
                        />
                    </OverflowToolbar>
                </table:extension>

                <table:columns>
                    <table:Column
                        id="idDocIdColumn"
                        width="7rem"
                        sortProperty="DocId"
                        resizable="true"
                        autoResizable="true"
                    >
                        <table:label>
                            <Text
                                id="idDocIdLabelText"
                                text="{i18n>docId}"
                            />
                        </table:label>
                        <table:template>
                            <Link text="{DocId}" press="onDocIdPress" />
                        </table:template>
                    </table:Column>
                    <table:Column
                        id="idFileNameColumn"
                        width="16rem"
                        resizable="true"
                        autoResizable="true"
                    >
                        <table:label>
                            <Text
                                id="idFileNameLabelText"
                                text="Nombre de fichero"
                            />
                        </table:label>
                        <table:template>
                            <Text
                                id="idFileNameCellText"
                                text="{FileName}"
                            />
                        </table:template>
                    </table:Column>
                    <table:Column
                        id="idDestinationColumn"
                        width="10rem"
                        resizable="true"
                        autoResizable="true"
                    >
                        <table:label>
                            <Text
                                id="idDestinationLabelText"
                                text="Destino"
                            />
                        </table:label>
                        <table:template>
                            <Text id="idDestinationCellText" text="{ path: 'Destination', formatter: '.formatDestinationText' }" />
                        </table:template>
                    </table:Column>
                    <table:Column
                        id="idObjectDescColumn"
                        width="9rem"
                        resizable="true"
                        autoResizable="true"
                    >
                        <table:label>
                            <Text
                                id="idObjectDescLabelText"
                                text="Tipo de Objeto"
                            />
                        </table:label>
                        <table:template>
                            <Text
                                id="idObjectDescCellText"
                                text="{ObjectDescription}"
                                maxLines="2"
                            />
                        </table:template>
                    </table:Column>
                    <table:Column
                        id="idObjKeyColumn"
                        width="12rem"
                        resizable="true"
                        autoResizable="true"
                    >
                        <table:label>
                            <Text
                                id="idObjKeyLabelText"
                                text="Clave Objeto"
                            />
                        </table:label>
                        <table:template>
                            <Text id="idObjKeyCellText" text="{ObjKey}" />
                        </table:template>
                    </table:Column>
                    <table:Column
                        id="idUsernameColumn"
                        width="8rem"
                        resizable="true"
                        autoResizable="true"
                    >
                        <table:label>
                            <Text
                                id="idUsernameLabelText"
                                text="{i18n>username}"
                            />
                        </table:label>
                        <table:template>
                            <Text
                                id="idUsernameCellText"
                                text="{Username}"
                            />
                        </table:template>
                    </table:Column>
                    <table:Column
                        id="idModifiedAtColumn"
                        width="9rem"
                        sortProperty="ModifiedAt"
                        resizable="true"
                        autoResizable="true"
                    >
                        <table:label>
                            <Text
                                id="idModifiedAtLabelText"
                                text="{i18n>modifiedAt}"
                            />
                        </table:label>
                        <table:template>
                            <Text
                                id="idModifiedAtCellText"
                                text="{ path: 'ModifiedAt', type: 'sap.ui.model.odata.type.DateTime', formatOptions: { pattern: 'dd.MM.yyyy HH:mm' } }"
                            />
                        </table:template>
                    </table:Column>
                    <table:Column
                        id="idErrorColumn"
                        width="5rem"
                        visible="false"
                        resizable="true"
                        autoResizable="true"
                    >
                        <table:label>
                            <Text
                                id="idErrorLabelText"
                                text="{i18n>error}"
                            />
                        </table:label>
                        <table:template>
                            <ObjectStatus
                                id="idErrorCellObjectStatus"
                                text="{path: 'Error', formatter: '.formatErrorText'}"
                                state="{path: 'Error', formatter: '.formatErrorState'}"
                            />
                        </table:template>
                    </table:Column>
                    <table:Column
                        id="idActionsColumn"
                        width="6rem"
                        resizable="true"
                        autoResizable="true"
                    >
                        <table:label>
                            <Text
                                id="idActionsLabelText"
                                text="{i18n>actions}"
                            />
                        </table:label>
                        <table:template>
                            <HBox id="idActionsCellHBox">
                                <Button
                                    id="idRowVisualizeButton"
                                    icon="sap-icon://show"
                                    type="Transparent"
                                    tooltip="{i18n>visualize}"
                                    press=".onRowVisualizePress"
                                />
                                <Button
                                    id="idDownloadButton"
                                    icon="sap-icon://download"
                                    type="Transparent"
                                    tooltip="{i18n>download}"
                                    press=".onDownloadDocument"
                                />
                            </HBox>
                        </table:template>
                    </table:Column>
                    <table:Column
                        id="idStatusColumn"
                        width="6rem"
                        resizable="true"
                        autoResizable="true"
                    >
                        <table:label>
                            <Text
                                id="idStatusLabelText"
                                text="Status"
                            />
                        </table:label>
                        <table:template>
                            <Text
                                id="idStatusCellText"
                                text="{path: 'Error', formatter: '.formatStatusText'}"
                            />
                        </table:template>
                    </table:Column>
                </table:columns>
            </table:Table>
        </f:content>
    </f:DynamicPage>
</mvc:View>
