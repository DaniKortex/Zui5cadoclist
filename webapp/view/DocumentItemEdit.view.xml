<mvc:View
    controllerName="zui5cadoclist.controller.DocumentItemEdit"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:uxap="sap.uxap"
    xmlns:layout="sap.ui.layout.form"
>
    <uxap:ObjectPageLayout
        id="documentItemObjectPage"
        showTitleInHeaderContent="true"
        upperCaseAnchorBar="false"
    >
        <uxap:headerTitle>
            <uxap:ObjectPageDynamicHeaderTitle>
                <uxap:expandedHeading>
                    <FlexBox
                        fitContainer="true"
                        alignItems="Center"
                    >
                        <Avatar src="sap-icon://pdf-attachment" />
                        <Title
                            text="{item>/DocId}"
                            wrapping="true"
                        />
                    </FlexBox>
                </uxap:expandedHeading>

                <uxap:snappedHeading>
                    <FlexBox
                        fitContainer="true"
                        alignItems="Center"
                    >
                        <Avatar src="sap-icon://pdf-attachment" />
                        <Title
                            text="{item>/DocId}"
                            wrapping="true"
                        />
                    </FlexBox>
                </uxap:snappedHeading>

                <uxap:expandedContent>
                    <Text text="{item>/FileName}" />
                </uxap:expandedContent>

                <uxap:snappedContent>
                    <Text text="{item>/FileName}" />
                </uxap:snappedContent>

                <uxap:snappedTitleOnMobile>
                    <Title text="{item>/DocId} {item>/FileName}" />
                </uxap:snappedTitleOnMobile>

                <uxap:actions>
                    <Button
                        text="Guardar"
                        type="Emphasized"
                        press="onSave"
                        visible="{ path: 'item>/Error', formatter: '.formatDestinationEditable' }"
                    />
                </uxap:actions>
            </uxap:ObjectPageDynamicHeaderTitle>
        </uxap:headerTitle>

        <uxap:headerContent>
            <layout:SimpleForm layout="ColumnLayout">
                <Label text="Usuario" />
                <Text text="{item>/Username}" />

                <Label text="Fecha modificación" />
                <Text
                    text="{path: 'item>/ModifiedAt', type: 'sap.ui.model.odata.type.DateTime', formatOptions: { pattern: 'dd.MM.yyyy HH:mm' } }"
                />
            </layout:SimpleForm>

            <layout:SimpleForm
                editable="true"
                layout="ResponsiveGridLayout"
            >
                <Label text="Destino" />
                <Input
                    id="idItemDestinationInput"
                    value="{item>/Destination}"
                    showValueHelp="true"
                    valueHelpRequest="onDestinationValueHelp"
                    width="10rem"
                    editable="{ path: 'item>/Error', formatter: '.formatDestinationEditable' }"
                />

                <Label text="Clave Objeto" />
                <HBox alignItems="Center">
                    <Text
                        text="{item>/ObjKey}"
                        width="30rem"
                    />
                    <Button
                        icon="sap-icon://edit"
                        type="Transparent"
                        tooltip="Editar clave"
                        press="onObjKeyLinkPress"
                        visible="{ parts: [{path: 'item>/Error'}, {path: 'item>/ObjKey'}, {path: 'item>/Destination'}], formatter: '.formatEditVisible' }"
                    />
                </HBox>

                <Label text="Tipo de Objeto" />
                <Input
                    id="idItemObjectTypeInput"
                    value="{item>/ObjectDescription}"
                    showValueHelp="true"
                    width="10rem"
                    valueHelpRequest="onObjectTypeValueHelp"
                    editable="{ path: 'item>/Error', formatter: '.formatDestinationEditable' }"
                />
            </layout:SimpleForm>
        </uxap:headerContent>

        <uxap:sections>
            <uxap:ObjectPageSection
                id="sectionPdf"
                title="Previsualización"
                showTitle="false"
            >
                <uxap:subSections>
                    <uxap:ObjectPageSubSection>
                        <PDFViewer
                            id="idPdfViewer"
                            source="{item>/pdfUrl}"
                            showDownloadButton="false"
                            isTrustedSource="true"
                            width="100%"
                            height="600px"
                        />
                    </uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
        </uxap:sections>
    </uxap:ObjectPageLayout>
</mvc:View>
